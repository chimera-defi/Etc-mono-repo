{"noir_version":"1.0.0-beta.17+0d6984c7c643b690e6559351f0cb36ce62b44b26","hash":"17177651001205435495","abi":{"parameters":[{"name":"deposit_amount","type":{"kind":"integer","sign":"unsigned","width":64},"visibility":"private"},{"name":"current_staked","type":{"kind":"integer","sign":"unsigned","width":64},"visibility":"public"},{"name":"current_shares","type":{"kind":"integer","sign":"unsigned","width":64},"visibility":"public"}],"return_type":{"abi_type":{"kind":"integer","sign":"unsigned","width":64},"visibility":"public"},"error_types":{"361444214588792908":{"error_kind":"string","string":"attempt to multiply with overflow"}}},"bytecode":"H4sIAAAAAAAA/81WvUoDQRCevdtLLskliCQW2lypneILBESwELG0kSjmkCuMepwByzyCWNn5Bnaij5PO0sbebNyBybJJbvYQ8kEyydzMfPOzPyfgD1LLm8t00JrIDf1fTD6+lgpdQycsOk/rJIlhAnUxFIIQxW1n+GQZQungFxDb3f5JNt573fk4PXwfjc7Ot/e/jh4/754Oxj/P3yXyCogihuLgcqkvz+K3rK4K8PJCeEweTq+rwKub26uK5uD2KgTewsZNpvy6sBqbrFaGsObgV4f/32R1ooihOLhcVUcuPJw8W1BmDpxFWIaHs8BoXQ0tI8Lp1OiCtjM7TZF3DV2kdRSSmQ9tBuf0WmYbMWyb4NaTJqnfZRGonnpMP05dreJxp+DmouYRAm9+LRIghuLg3ooK3JtRzYM7Rx94a8esBw8vfOaD/VY5vniLX7ZkYPqvadlPs+QqT4dJLx0MkyxHv1DLDuFj5CzQv+3mP30LMtEhvzEu8tADLwYefC0DyzOMKw3b0JCCzy/m5SEsxutatokO+7GpJZ1lnlwnWe/+4TZPk0FuZlsnTIypeOjfcPO3TpVe3w2TUEtp8RNz/nuGXGS76L0vsjzDmDgNmi/W8QuumrBJFQ4AAA==","debug_symbols":"nZLNroMgEEbfZdYsQPEHX+XmxqBiQ0LQULjJjfHdO4K0ddFNN3OE8XwZlA0mNYRbr+283KH72WBw2hh9680ySq8Xi7vbTiAve++Uwi1466O1Sqesh84GYwj8SRPiS/dV2kgvHXYpAWUnJAbO2qjjaScvm35WRc1OmdGievoVuwSwzwGlKM4ATsUXPuci+w39ym+z39YX/xdXctTu8smhhA4H5rFWsdZ4CAJNrG2sIlZGMRPBEoqEMoEnVAl1QpPQJoiI4kjZj/mdloNR53+fgx3froH/X3MnX5TVLaOaglPH/LGHJ3oA","file_map":{"51":{"source":"// Basic Staking Pool Contract Skeleton\n// NOTE: This is base Noir syntax. Aztec-specific macros require aztec-nargo.\n\n// Pool state - would be storage in Aztec\nstruct PoolState {\n    total_staked: u64,\n    total_shares: u64,\n    fee_bps: u64, // 1000 = 10%\n}\n\n// Deposit calculation - core staking logic\nfn calculate_shares(amount: u64, total_staked: u64, total_shares: u64) -> u64 {\n    if total_staked == 0 {\n        amount\n    } else {\n        (amount * total_shares) / total_staked\n    }\n}\n\n// Withdraw calculation\nfn calculate_withdrawal(shares: u64, total_staked: u64, total_shares: u64) -> u64 {\n    if total_shares == 0 {\n        0\n    } else {\n        (shares * total_staked) / total_shares\n    }\n}\n\n// Fee calculation\nfn calculate_fee(amount: u64, fee_bps: u64) -> u64 {\n    (amount * fee_bps) / 10000\n}\n\n// Main entry point (required for nargo compile)\nfn main(deposit_amount: u64, current_staked: pub u64, current_shares: pub u64) -> pub u64 {\n    calculate_shares(deposit_amount, current_staked, current_shares)\n}\n\n#[test]\nfn test_initial_deposit() {\n    // First deposit should receive 1:1 shares\n    let shares = calculate_shares(1000, 0, 0);\n    assert(shares == 1000);\n}\n\n#[test]\nfn test_proportional_deposit() {\n    // Pool has 1000 staked, 1000 shares. Deposit 500 -> get 500 shares\n    let shares = calculate_shares(500, 1000, 1000);\n    assert(shares == 500);\n}\n\n#[test]\nfn test_withdrawal_with_rewards() {\n    // Pool has 2000 staked (1000 principal + 1000 rewards), 1000 shares\n    // Withdrawing 500 shares gets 1000 tokens\n    let withdrawal = calculate_withdrawal(500, 2000, 1000);\n    assert(withdrawal == 1000);\n}\n\n#[test]\nfn test_fee_calculation() {\n    // 10% fee (1000 bps) on 1000 tokens = 100\n    let fee = calculate_fee(1000, 1000);\n    assert(fee == 100);\n}\n\n#[test]\nfn test_main() {\n    let shares = main(500, 1000, 1000);\n    assert(shares == 500);\n}\n","path":"/tmp/aztec-test/staking_pool/src/main.nr"}},"expression_width":{"Bounded":{"width":4}}}